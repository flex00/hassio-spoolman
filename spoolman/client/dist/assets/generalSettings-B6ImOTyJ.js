import{F as n,s as y,G as d,R as l,j as e,I as f,B as g}from"./index-DVifsFYV.js";import{u as x,a as h}from"./querySettings-CUjj6H0m.js";function F(){var i;const s=x(),t=h("currency"),[a]=n.useForm(),[c,m]=y.useMessage(),r=d();l.useEffect(()=>{s.data&&a.setFieldsValue({currency:JSON.parse(s.data.currency.value)})},[s.data,a]),l.useEffect(()=>{t.isSuccess&&c.success(r("notifications.saveSuccessful"))},[t.isSuccess,c,r]);const p=u=>{var o;((o=s.data)==null?void 0:o.currency.value)!==JSON.stringify(u.currency)&&t.mutate({key:"currency",value:JSON.stringify(u.currency)})};return e.jsxs(e.Fragment,{children:[e.jsxs(n,{form:a,labelCol:{span:8},wrapperCol:{span:16},initialValues:{currency:(i=s.data)==null?void 0:i.currency.value},onFinish:p,style:{maxWidth:"600px",margin:"0 auto"},children:[e.jsx(n.Item,{label:r("settings.general.currency.label"),name:"currency",rules:[{required:!0},{pattern:/^[A-Z]{3}$/}],children:e.jsx(f,{})}),e.jsx(n.Item,{wrapperCol:{offset:8,span:16},children:e.jsx(g,{type:"primary",htmlType:"submit",loading:s.isFetching||t.isLoading,children:r("buttons.save")})})]}),m]})}export{F as GeneralSettings};

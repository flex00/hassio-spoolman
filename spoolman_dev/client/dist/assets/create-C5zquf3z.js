import{d as h,G as y,T as j,R as v,j as e,V as g,B as m,F as i,I as b,b as F,c as _}from"./index-DVifsFYV.js";import{u as V,E}from"./queryFields-mgjQgxCo.js";import{E as T,S as I}from"./extraFields-qtPcbZeu.js";import{u as w}from"./utc-BBX0ZL_c.js";import{T as A}from"./index-Bg14sNK-.js";import"./numberField-DPMhgxPK.js";import"./parsing-BWLjJB_7.js";import"./inputNumberRange-BgK2w3SK.js";import"./index-fxb4jQRc.js";h.extend(w);const J=u=>{var d;const t=y(),l=V(E.vendor),{form:n,formProps:r,formLoading:p,onFinish:c,redirect:x}=j();r.initialValues||(r.initialValues={});const o=async s=>{const a=I(await n.validateFields());await c(a),x(s,a.id)};return v.useEffect(()=>{var s;(s=l.data)==null||s.forEach(a=>{if(r.initialValues&&a.default_value){const f=JSON.parse(a.default_value);n.setFieldsValue({extra:{[a.key]:f}})}})},[n,l.data,r.initialValues]),e.jsx(g,{title:u.mode==="create"?t("vendor.titles.create"):t("vendor.titles.clone"),isLoading:p,footerButtons:()=>e.jsxs(e.Fragment,{children:[e.jsx(m,{type:"primary",onClick:()=>o("list"),children:t("buttons.save")}),e.jsx(m,{type:"primary",onClick:()=>o("create"),children:t("buttons.saveAndAdd")})]}),children:e.jsxs(i,{...r,layout:"vertical",children:[e.jsx(i.Item,{label:t("vendor.fields.name"),name:["name"],rules:[{required:!0}],children:e.jsx(b,{maxLength:64})}),e.jsx(i.Item,{label:t("vendor.fields.comment"),name:["comment"],rules:[{required:!1}],children:e.jsx(F,{maxLength:1024})}),e.jsx(i.Item,{label:t("vendor.fields.empty_spool_weight"),help:t("vendor.fields_help.empty_spool_weight"),name:["empty_spool_weight"],rules:[{required:!1,type:"number",min:0}],children:e.jsx(A,{addonAfter:"g",precision:1})}),e.jsx(_.Title,{level:5,children:t("settings.extra_fields.tab")}),(d=l.data)==null?void 0:d.map((s,a)=>e.jsx(T,{field:s},a))]})})};export{J as VendorCreate,J as default};

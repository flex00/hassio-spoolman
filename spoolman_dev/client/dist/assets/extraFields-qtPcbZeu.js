import{d as o,j as t,n as l,m as d,F as x,c as y,I as _,v as g}from"./index-DVifsFYV.js";import{F as r}from"./queryFields-mgjQgxCo.js";import{N as m,a as h}from"./numberField-DPMhgxPK.js";import{e as j}from"./parsing-BWLjJB_7.js";import{u as v}from"./utc-BBX0ZL_c.js";import{I as p,b as F}from"./inputNumberRange-BgK2w3SK.js";import{T as c}from"./index-Bg14sNK-.js";import{S as E}from"./index-fxb4jQRc.js";o.extend(v);const{Title:D}=y;function P(n){const{field:e,value:a}=n;let i;if(a!==void 0){const s=JSON.parse(a);if(e.field_type===r.integer)i=t.jsx(m,{value:s??"",unit:e.unit??"",options:{maximumFractionDigits:0,minimumFractionDigits:0}});else if(e.field_type===r.float)i=t.jsx(m,{value:s??"",unit:e.unit??"",options:{maximumFractionDigits:3,minimumFractionDigits:0}});else if(e.field_type===r.integer_range||e.field_type===r.float_range){if(!Array.isArray(s)||s.length!==2)return t.jsx(l,{value:s});i=t.jsx(h,{value:s,unit:e.unit??"",options:{maximumFractionDigits:e.field_type===r.float_range?3:0,minimumFractionDigits:0}})}else if(e.field_type===r.text)i=t.jsx(l,{value:j(s)});else if(e.field_type===r.datetime)i=t.jsx(d,{value:o.utc(s).local(),title:o.utc(s).local().format(),format:"YYYY-MM-DD HH:mm:ss"});else if(e.field_type===r.boolean)i=t.jsx(l,{value:s?"Yes":"No"});else if(e.field_type===r.choice&&!e.multi_choice)i=t.jsx(l,{value:s});else if(e.field_type===r.choice&&e.multi_choice)i=t.jsx(l,{value:s.join(", ")});else throw new Error(`Unknown field type: ${e.field_type}`)}else i=t.jsx(t.Fragment,{});return t.jsxs(t.Fragment,{children:[t.jsx(D,{level:5,children:e.name}),i]})}function Y(n){var f;const{field:e}=n;let a;const i=[{required:!1}],s={};if(e.field_type===r.integer)a=t.jsx(c,{addonAfter:e.unit,precision:0}),i.push({type:"integer"});else if(e.field_type===r.float)a=t.jsx(c,{addonAfter:e.unit,precision:3}),i.push({type:"number"});else if(e.field_type===r.integer_range)a=t.jsx(p,{unit:e.unit,precision:0});else if(e.field_type===r.float_range)a=t.jsx(p,{unit:e.unit,precision:3});else if(e.field_type===r.text)a=t.jsx(_,{}),i.push({type:"string"});else if(e.field_type===r.datetime)a=t.jsx(F,{});else if(e.field_type===r.boolean)a=t.jsx(g,{}),s.valuePropName="checked",i.push({type:"boolean"});else if(e.field_type===r.choice)a=t.jsx(E,{mode:e.multi_choice?"multiple":void 0,options:(f=e.choices)==null?void 0:f.map(u=>({label:u,value:u}))}),i.push({type:e.multi_choice?"array":"string"});else throw new Error(`Unknown field type: ${e.field_type}`);return n.setDefaultValue&&(s.initialValue=e.default_value),t.jsx(x.Item,{label:e.name,name:["extra",e.key],rules:i,...s,children:a})}function A(n){if(n.extra){const e={};return Object.entries(n.extra).forEach(([a,i])=>{try{e[a]=JSON.parse(i)}catch{e[a]=i}}),{...n,extra:e}}else return n}function U(n){if(n.extra){const e={};return Object.entries(n.extra).forEach(([a,i])=>{e[a]=JSON.stringify(i)}),{...n,extra:e}}else return{...n,extra:void 0}}export{Y as E,A as P,U as S,P as a};
